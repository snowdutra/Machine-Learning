---
hide:
- toc
---

# 02. M√©tricas de Avalia√ß√£o Avan√ßadas

## üéØ Classifica√ß√£o: M√©tricas Fundamentais e Avan√ßadas

### **M√©tricas B√°sicas** üìä

| M√©trica | Prop√≥sito | F√≥rmula | Quando Usar | Limita√ß√µes |
|---------|-----------|---------|-------------|------------|
| **Acur√°cia** | Propor√ß√£o geral de acertos | $\frac{TP + TN}{TP + TN + FP + FN}$ | Dados balanceados | Falha com desbalanceamento |
| **Precis√£o** | Confiabilidade dos positivos | $\frac{TP}{TP + FP}$ | Falsos positivos custosos | Ignora falsos negativos |
| **Recall (Sensibilidade)** | Cobertura dos positivos | $\frac{TP}{TP + FN}$ | Falsos negativos cr√≠ticos | Ignora falsos positivos |
| **F1-Score** | Harmonia Precis√£o-Recall | $2 \cdot \frac{P \times R}{P + R}$ | Dados desbalanceados | M√©dia pode mascarar extremos |

### **M√©tricas Robustas para Dados Desbalanceados** üé≠

| M√©trica | F√≥rmula | Interpreta√ß√£o | Vantagens |
|---------|---------|---------------|-----------|
| **Balanced Accuracy** | $\frac{1}{2}(\frac{TP}{TP+FN} + \frac{TN}{TN+FP})$ | M√©dia dos recalls por classe | N√£o enviesada por distribui√ß√£o |
| **Matthews Correlation** | $\frac{TP \times TN - FP \times FN}{\sqrt{(TP+FP)(TP+FN)(TN+FP)(TN+FN)}}$ | Correla√ß√£o entre predi√ß√£o e realidade [-1,1] | Considera todas as c√©lulas da matriz |
| **Cohen's Kappa** | $\frac{p_o - p_e}{1 - p_e}$ | Concord√¢ncia al√©m do acaso | Ajusta para concord√¢ncia aleat√≥ria |
| **AUC-ROC** | √Årea sob curva ROC | Discrimina√ß√£o entre classes [0,1] | Independente do threshold |
| **AUC-PR** | √Årea sob curva Precision-Recall | Performance em classe minorit√°ria | Melhor para dados muito desbalanceados |

### **M√©tricas de Calibra√ß√£o** üéØ

| M√©trica | Prop√≥sito | Interpreta√ß√£o |
|---------|-----------|---------------|
| **Brier Score** | Acur√°cia das probabilidades | Menor √© melhor [0,1] |
| **Log Loss** | Penaliza predi√ß√µes confiantes incorretas | Menor √© melhor |
| **Reliability Diagram** | Visualiza calibra√ß√£o | Diagonal = perfeitamente calibrado |

## üìà Regress√£o: Do B√°sico ao Avan√ßado

### **M√©tricas Fundamentais** üìä

| M√©trica | F√≥rmula | Unidade | Robustez a Outliers | Interpretabilidade |
|---------|---------|---------|---------------------|-------------------|
| **MAE** | $\frac{1}{n}\sum_{i=1}^n |y_i - \hat{y}_i|$ | Original | Alta | Excelente |
| **MSE** | $\frac{1}{n}\sum_{i=1}^n (y_i - \hat{y}_i)^2$ | Quadr√°tica | Baixa | Moderada |
| **RMSE** | $\sqrt{MSE}$ | Original | Baixa | Boa |
| **MAPE** | $\frac{100\%}{n}\sum_{i=1}^n \left|\frac{y_i - \hat{y}_i}{y_i}\right|$ | Percentual | Moderada | Excelente |

### **M√©tricas de Ajuste** üéØ

| M√©trica | F√≥rmula | Interpreta√ß√£o | Limita√ß√µes |
|---------|---------|---------------|------------|
| **R¬≤ (Coef. Determina√ß√£o)** | $1 - \frac{SS_{res}}{SS_{tot}}$ | % vari√¢ncia explicada | Sempre aumenta com mais features |
| **R¬≤ Ajustado** | $1 - \frac{(1-R^2)(n-1)}{n-k-1}$ | Penaliza complexidade | Melhor para comparar modelos |
| **AIC (Crit√©rio Akaike)** | $2k - 2\ln(L)$ | Balan√ßa ajuste vs complexidade | Requer likelihood |
| **BIC (Crit√©rio Bayesiano)** | $k\ln(n) - 2\ln(L)$ | Penaliza mais a complexidade | Favorece modelos simples |

### **M√©tricas Robustas** üí™

| M√©trica | F√≥rmula | Vantagem |
|---------|---------|----------|
| **Median AE** | $\text{mediana}(|y_i - \hat{y}_i|)$ | Imune a outliers extremos |
| **Huber Loss** | $\begin{cases} \frac{1}{2}(y-\hat{y})^2 & \text{se } |y-\hat{y}| \leq \delta \\ \delta|y-\hat{y}| - \frac{1}{2}\delta^2 & \text{caso contr√°rio} \end{cases}$ | Combina MSE e MAE |

## üé≠ Clustering: M√©tricas Internas e Externas

### **M√©tricas Internas** (Sem ground truth) üîç

| M√©trica | F√≥rmula/Conceito | Interpreta√ß√£o | Range |
|---------|------------------|---------------|-------|
| **Silhouette Score** | $\frac{b-a}{\max(a,b)}$ onde $a$ = dist. intra-cluster, $b$ = dist. inter-cluster | Qualidade da separa√ß√£o | [-1, 1] |
| **Calinski-Harabasz** | $\frac{SS_B/(k-1)}{SS_W/(n-k)}$ | Raz√£o vari√¢ncia entre/dentro clusters | [0, ‚àû] |
| **Davies-Bouldin** | $\frac{1}{k}\sum_{i=1}^k \max_{j \neq i} \frac{\sigma_i + \sigma_j}{d(c_i, c_j)}$ | Similaridade m√©dia entre clusters | [0, ‚àû] |
| **In√©rcia (WCSS)** | $\sum_{i=1}^k \sum_{x \in C_i} ||x - \mu_i||^2$ | Compacta√ß√£o dos clusters | [0, ‚àû] |

### **M√©tricas Externas** (Com ground truth) ‚úÖ

| M√©trica | Interpreta√ß√£o | Vantagem |
|---------|---------------|----------|
| **Adjusted Rand Index** | Similaridade corrigida por acaso | Ajustada para chance |
| **Normalized Mutual Information** | Informa√ß√£o compartilhada normalizada | Te√≥ricamente fundamentada |
| **Homogeneity** | Clusters cont√™m apenas uma classe | Penaliza mistura |
| **Completeness** | Membros de uma classe em mesmo cluster | Penaliza divis√£o |

## üéÆ M√©tricas Especializadas por Dom√≠nio

### **Sistemas de Recomenda√ß√£o** üé¨

| M√©trica | Prop√≥sito | F√≥rmula |
|---------|-----------|---------|
| **Precision@K** | Relev√¢ncia nos top-K | $\frac{\text{Relevantes em top-K}}{K}$ |
| **Recall@K** | Cobertura nos top-K | $\frac{\text{Relevantes em top-K}}{\text{Total Relevantes}}$ |
| **NDCG** | Ranking com posi√ß√£o | $\frac{DCG@K}{IDCG@K}$ |
| **MAP** | Precis√£o m√©dia | $\frac{1}{Q}\sum_{q=1}^Q AP(q)$ |

### **S√©ries Temporais** ‚è∞

| M√©trica | Caracter√≠stica | Uso |
|---------|----------------|-----|
| **SMAPE** | Sim√©trica e percentual | Comparar s√©ries diferentes |
| **MASE** | Escala absoluta | Benchmark contra naive |
| **Theil's U** | Relativa ao random walk | Avalia√ß√£o econ√¥mica |

### **Modelos Probabil√≠sticos** üé≤

| M√©trica | Prop√≥sito | Interpreta√ß√£o |
|---------|-----------|---------------|
| **Perplexidade** | Qualidade de modelo de linguagem | Menor = melhor |
| **Entropia Cruzada** | Diverg√™ncia entre distribui√ß√µes | Menor = melhor |
| **KL-Diverg√™ncia** | Diferen√ßa entre distribui√ß√µes | 0 = id√™nticas |

## üéØ Guia de Sele√ß√£o de M√©tricas

### **Para Classifica√ß√£o** üìä

```mermaid
graph TD
    A[Dados Balanceados?] --> |Sim| B[Acur√°cia + F1]
    A --> |N√£o| C[F1 + AUC-ROC + Balanced Accuracy]
    C --> D[Classe minorit√°ria muito importante?]
    D --> |Sim| E[AUC-PR + Recall]
    D --> |N√£o| F[F1 + MCC]
```

### **Para Regress√£o** üìà

```mermaid
graph TD
    A[Outliers presentes?] --> |Sim| B[MAE + Median AE]
    A --> |N√£o| C[RMSE + R¬≤]
    C --> D[Erros relativos importantes?]
    D --> |Sim| E[MAPE + SMAPE]
    D --> |N√£o| F[RMSE + MAE]
```

### **Para Clustering** üé≠

```mermaid
graph TD
    A[Ground truth dispon√≠vel?] --> |Sim| B[ARI + NMI]
    A --> |N√£o| C[Silhouette + Calinski-Harabasz]
    C --> D[Muitos clusters?]
    D --> |Sim| E[Davies-Bouldin]
    D --> |N√£o| F[Silhouette Score]
```

## üö® Armadilhas Comuns

### **‚ùå Uso Incorreto**
- Acur√°cia em dados 99% desbalanceados
- R¬≤ sem considerar overfitting
- Silhouette Score com apenas 2 clusters

### **‚úÖ Melhores Pr√°ticas**
- **M√∫ltiplas m√©tricas** complementares
- **Intervalos de confian√ßa** nas m√©tricas
- **An√°lise residual** em regress√£o
- **Valida√ß√£o cruzada** para robustez

## üéì Interpreta√ß√£o Pr√°tica

### **Classifica√ß√£o - Benchmarks** üéØ
- **Excelente**: AUC-ROC > 0.9, F1 > 0.8
- **Bom**: AUC-ROC > 0.8, F1 > 0.7
- **Moderado**: AUC-ROC > 0.7, F1 > 0.6
- **Ruim**: AUC-ROC < 0.6, F1 < 0.5

### **Clustering - Benchmarks** üé≠
- **Excelente**: Silhouette > 0.7
- **Bom**: Silhouette > 0.5
- **Moderado**: Silhouette > 0.3
- **Ruim**: Silhouette < 0.2

> **"A m√©trica perfeita n√£o existe. A combina√ß√£o inteligente de m√∫ltiplas m√©tricas revela a verdade sobre o modelo."**